"use strict";(self.webpackChunkportal=self.webpackChunkportal||[]).push([[7826],{37826:(C,g,a)=>{a.r(g),a.d(g,{DocPoHttpInterceptorModule:()=>F});var E=a(35915),c=a(51188),e=a(54438),r=a(4135),b=a(60177),k=a(17458),v=a(21626),p=a(84341),f=a(84267);class d{http;headerParam;requestMessage;status;errorMessage='{\n    "code": "401",\n    "message": "Not Authorized",\n    "detailTitle": "Invalid credentials",\n    "detailedMessage": "The request has not been applied because it lacks valid authentication credentials for the target resource.",\n    "type": "error",\n    "helpUrl": "",\n    "details": [{\n        "code": "406",\n        "message": "Not Acceptable",\n        "detailedMessage": "The target resource does not have a current representation that would be acceptable to the user agent",\n        "type": "error"\n    }]\n}';successMessage='{\n    "_messages": [\n        {\n            "code": "200",\n            "message": "Ok",\n            "detailedMessage": "The request has succeeded.",\n            "type": "success",\n            "helpUrl": "",\n            "details": [{\n              "code": "202",\n              "message": "Accepted",\n              "detailTitle": "Request was received",\n              "detailedMessage": "The request has been accepted for processing, but the processing has not been completed.",\n              "type": "warning"\n            }]\n        }\n    ]\n}';statusOptions=[{label:"200 - Success",value:"200"},{label:"401 - Error",value:"401"}];headerParamOptions=[{label:"X-PO-No-Message",value:"No-Message"},{label:"X-PO-No-Error",value:"No-Error"}];apiSubscription;constructor(t){this.http=t}ngOnDestroy(){this.apiSubscription&&this.apiSubscription.unsubscribe()}ngOnInit(){this.restore()}changeOption(){this.requestMessage="200"===this.status?this.successMessage:this.errorMessage}getParam(){return"No-Message"===this.headerParam?{"X-PO-No-Message":"true"}:"No-Error"===this.headerParam?{"X-PO-No-Error":"true"}:{}}processRequest(){const t=this.getParam(),o=JSON.parse(this.requestMessage),s={status:this.status||""};this.apiSubscription=this.http.post("https://po-sample-api.onrender.com/v1/messages",o,{headers:t,params:s}).subscribe()}restore(){this.headerParam=void 0,this.requestMessage=this.successMessage,this.status="200"}static \u0275fac=function(o){return new(o||d)(e.rXU(v.Qq))};static \u0275cmp=e.VBU({type:d,selectors:[["sample-po-http-interceptor-labs"]],decls:15,vars:5,consts:[["p-height","330","p-theme","vs-dark",3,"ngModel","ngModelChange"],["requestForm","ngForm"],[1,"po-row"],["name","status","p-label","Http Status",1,"po-md-6",3,"ngModel","p-options","ngModelChange","p-change"],["name","headerParam","p-label","Disables Notifications",1,"po-md-6",3,"ngModel","p-options","ngModelChange"],[1,"po-row","po-mt-1"],["p-label","Process Request",1,"po-md-3",3,"p-click"],["p-label","Sample Restore",1,"po-md-3",3,"p-click"]],template:function(o,s){1&o&&(e.j41(0,"h2"),e.EFF(1,"Process request with Http Interceptor"),e.k0s(),e.j41(2,"p"),e.EFF(3,"Edit response object by server with pattern expected by Http Interceptor:"),e.k0s(),e.j41(4,"po-code-editor",0),e.mxI("ngModelChange",function(n){return e.DH7(s.requestMessage,n)||(s.requestMessage=n),n}),e.k0s(),e.nrm(5,"hr"),e.j41(6,"form",null,1)(8,"div",2)(9,"po-radio-group",3),e.mxI("ngModelChange",function(n){return e.DH7(s.status,n)||(s.status=n),n}),e.bIt("p-change",function(){return s.changeOption()}),e.k0s(),e.j41(10,"po-radio-group",4),e.mxI("ngModelChange",function(n){return e.DH7(s.headerParam,n)||(s.headerParam=n),n}),e.k0s()(),e.j41(11,"div",5)(12,"po-button",6),e.bIt("p-click",function(){return s.processRequest()}),e.k0s()(),e.j41(13,"div",5)(14,"po-button",7),e.bIt("p-click",function(){return s.restore()}),e.k0s()()()),2&o&&(e.R7$(4),e.R50("ngModel",s.requestMessage),e.R7$(5),e.R50("ngModel",s.status),e.Y8G("p-options",s.statusOptions),e.R7$(),e.R50("ngModel",s.headerParam),e.Y8G("p-options",s.headerParamOptions))},dependencies:[p.qT,p.BC,p.cb,p.vS,p.cV,r.rmE,r.hwz,f.JJ],encapsulation:2})}const j=P=>({"docs-sample-code-tabs":P});class u{hideSampleCodeTabs=!0;sampleCodeButtonLabel="Talk is cheap, show me the code!";sampleCodeButtonIcon="po-icon po-icon-plus";toggleSampleCodeTabs(){this.hideSampleCodeTabs=!this.hideSampleCodeTabs,this.sampleCodeButtonLabel=this.hideSampleCodeTabs?"Talk is cheap, show me the code!":"Okay, hide the code",this.sampleCodeButtonIcon=this.hideSampleCodeTabs?"po-icon-plus":"po-icon-minus"}static \u0275fac=function(o){return new(o||u)};static \u0275cmp=e.VBU({type:u,selectors:[["sample-po-http-interceptor-labs-view"]],decls:24,vars:6,consts:[[1,"sample-blockquote"],[1,"sample-title","po-font-text-large-bold"],[1,"show-me-the-code",3,"click"],[3,"ngClass"],["p-size","2"],["p-label","HTML","p-active",""],[1,"doc-label-path"],["appCodeHighlight","",1,"html"],["p-label","TS"],["appCodeHighlight","",1,"typescript"],[1,"docs-sample-container"]],template:function(o,s){1&o&&(e.nrm(0,"br"),e.j41(1,"blockquote",0)(2,"label",1),e.EFF(3,"PO Http Interceptor Labs"),e.k0s(),e.j41(4,"a",2),e.bIt("click",function(){return s.toggleSampleCodeTabs()}),e.nrm(5,"span"),e.EFF(6),e.k0s()(),e.j41(7,"div",3)(8,"po-tabs",4)(9,"po-tab",5)(10,"div")(11,"label",6),e.EFF(12,"sample-po-http-interceptor-labs.component.html"),e.k0s(),e.j41(13,"pre",7),e.EFF(14,'<h2>Process request with Http Interceptor</h2>\n<p>Edit response object by server with pattern expected by Http Interceptor:</p>\n\n<po-code-editor [(ngModel)]="requestMessage" p-height="330" p-theme="vs-dark"> </po-code-editor>\n\n<hr />\n\n<form #requestForm="ngForm">\n  <div class="po-row">\n    <po-radio-group\n      class="po-md-6"\n      name="status"\n      [(ngModel)]="status"\n      p-label="Http Status"\n      [p-options]="statusOptions"\n      (p-change)="changeOption()"\n    >\n    </po-radio-group>\n\n    <po-radio-group\n      class="po-md-6"\n      name="headerParam"\n      [(ngModel)]="headerParam"\n      p-label="Disables Notifications"\n      [p-options]="headerParamOptions"\n    >\n    </po-radio-group>\n  </div>\n\n  <div class="po-row po-mt-1">\n    <po-button class="po-md-3" p-label="Process Request" (p-click)="processRequest()"> </po-button>\n  </div>\n\n  <div class="po-row po-mt-1">\n    <po-button class="po-md-3" p-label="Sample Restore" (p-click)="restore()"> </po-button>\n  </div>\n</form>\n'),e.k0s()()(),e.j41(15,"po-tab",8)(16,"div")(17,"label",6),e.EFF(18,"sample-po-http-interceptor-labs.component.ts"),e.k0s(),e.j41(19,"pre",9),e.EFF(20,'// import { PoRadioGroupOption } from \'./../../../../../../../dist/ng-components/lib/components/po-field/po-radio-group/po-radio-group-option.interface.d\';\nimport { HttpClient } from \'@angular/common/http\';\nimport { Component, OnDestroy, OnInit } from \'@angular/core\';\n\nimport { PoRadioGroupOption } from \'@po-ui/ng-components\';\nimport { Subscription } from \'rxjs\';\n\n@Component({\n  selector: \'sample-po-http-interceptor-labs\',\n  templateUrl: \'./sample-po-http-interceptor-labs.component.html\'\n})\nexport class SamplePoHttpInterceptorLabsComponent implements OnDestroy, OnInit {\n  headerParam: string;\n  requestMessage: string;\n  status: string;\n\n  errorMessage = `{\n    "code": "401",\n    "message": "Not Authorized",\n    "detailTitle": "Invalid credentials",\n    "detailedMessage": "The request has not been applied because it lacks valid authentication credentials for the target resource.",\n    "type": "error",\n    "helpUrl": "",\n    "details": [{\n        "code": "406",\n        "message": "Not Acceptable",\n        "detailedMessage": "The target resource does not have a current representation that would be acceptable to the user agent",\n        "type": "error"\n    }]\n}`;\n\n  successMessage = `{\n    "_messages": [\n        {\n            "code": "200",\n            "message": "Ok",\n            "detailedMessage": "The request has succeeded.",\n            "type": "success",\n            "helpUrl": "",\n            "details": [{\n              "code": "202",\n              "message": "Accepted",\n              "detailTitle": "Request was received",\n              "detailedMessage": "The request has been accepted for processing, but the processing has not been completed.",\n              "type": "warning"\n            }]\n        }\n    ]\n}`;\n\n  readonly statusOptions: Array<PoRadioGroupOption> = [\n    { label: \'200 - Success\', value: \'200\' },\n    { label: \'401 - Error\', value: \'401\' }\n  ];\n\n  readonly headerParamOptions: Array<PoRadioGroupOption> = [\n    { label: \'X-PO-No-Message\', value: \'No-Message\' },\n    { label: \'X-PO-No-Error\', value: \'No-Error\' }\n  ];\n\n  private apiSubscription: Subscription;\n\n  constructor(private http: HttpClient) {}\n\n  ngOnDestroy() {\n    if (this.apiSubscription) {\n      this.apiSubscription.unsubscribe();\n    }\n  }\n\n  ngOnInit() {\n    this.restore();\n  }\n\n  changeOption() {\n    this.requestMessage = this.status === \'200\' ? this.successMessage : this.errorMessage;\n  }\n\n  getParam() {\n    return this.headerParam === \'No-Message\'\n      ? { \'X-PO-No-Message\': \'true\' }\n      : this.headerParam === \'No-Error\'\n        ? { \'X-PO-No-Error\': \'true\' }\n        : {};\n  }\n\n  processRequest() {\n    const headers = this.getParam();\n    const body = JSON.parse(this.requestMessage);\n    const params = { status: this.status || \'\' };\n\n    this.apiSubscription = this.http\n      .post(`https://po-sample-api.onrender.com/v1/messages`, body, { headers, params })\n      .subscribe();\n  }\n\n  restore() {\n    this.headerParam = undefined;\n    this.requestMessage = this.successMessage;\n    this.status = \'200\';\n  }\n}\n'),e.k0s()()()()(),e.j41(21,"div",10),e.nrm(22,"sample-po-http-interceptor-labs"),e.k0s(),e.nrm(23,"hr")),2&o&&(e.R7$(5),e.HbH("po-icon "+s.sampleCodeButtonIcon),e.R7$(),e.SpI(" ",s.sampleCodeButtonLabel,""),e.R7$(),e.Y8G("ngClass",e.eq3(4,j,s.hideSampleCodeTabs)))},dependencies:[b.YU,k.N,r.OX9,r.pxt,d],encapsulation:2})}class l{static \u0275fac=function(o){return new(o||l)};static \u0275cmp=e.VBU({type:l,selectors:[["sample-po-http-interceptor-doc"]],decls:160,vars:0,consts:[[1,"docs-api"],[1,"docs-api-module-import"],[1,"docs-api-class-description"],[1,"docs-api-h3"],[1,"docs-api-class-name"],[1,"doc-code"],["href","guides/api"]],template:function(o,s){1&o&&(e.j41(0,"div",0)(1,"p",1)(2,"code"),e.EFF(3,"import { PoHttpInterceptorModule } from '@po-ui/ng-components';"),e.k0s()(),e.nrm(4,"div",2),e.j41(5,"h3",3),e.EFF(6,"Services"),e.k0s(),e.j41(7,"h4",4)(8,"code",5),e.EFF(9,"PoHttpInterceptorService"),e.k0s()(),e.j41(10,"div",2)(11,"p"),e.EFF(12,"O "),e.j41(13,"em"),e.EFF(14,"interceptor"),e.k0s(),e.EFF(15," tem a finalidade de exibir notifica\xe7\xf5es com mensagens na tela, baseado nas respostas das requisi\xe7\xf5es HTTP."),e.k0s(),e.j41(16,"p"),e.EFF(17,"Pode ser utilizado para dar feedback das a\xe7\xf5es do usu\xe1rio como, por exemplo: erro de autoriza\xe7\xe3o, mensagens de regras de neg\xf3cio,\natualiza\xe7\xf5es de registros, erro quando o servidor estiver indispon\xedvel e entre outros."),e.k0s(),e.j41(18,"h2"),e.EFF(19,"Configura\xe7\xe3o"),e.k0s(),e.j41(20,"p"),e.EFF(21,"Para o correto funcionamento do interceptor "),e.j41(22,"code"),e.EFF(23,"po-http-interceptor"),e.k0s(),e.EFF(24,", deve ser importado o "),e.j41(25,"code"),e.EFF(26,"BrowserAnimationsModule"),e.k0s(),e.EFF(27," no\nm\xf3dulo principal da sua aplica\xe7\xe3o."),e.k0s(),e.j41(28,"p"),e.EFF(29,"M\xf3dulo da aplica\xe7\xe3o:"),e.k0s(),e.j41(30,"pre")(31,"code"),e.EFF(32,"import { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { PoModule } from '@po-ui/ng-components';\n...\n\n@NgModule({\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    ...\n    PoModule\n  ],\n  declarations: [\n    AppComponent,\n    ...\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n"),e.k0s()(),e.j41(33,"p"),e.EFF(34,"Ao importar o m\xf3dulo "),e.j41(35,"code"),e.EFF(36,"PoModule"),e.k0s(),e.EFF(37," na aplica\xe7\xe3o, o "),e.j41(38,"code"),e.EFF(39,"po-http-interceptor"),e.k0s(),e.EFF(40," \xe9 automaticamente configurado sem a necessidade\nde qualquer configura\xe7\xe3o extra."),e.k0s(),e.j41(41,"p"),e.EFF(42,"Ao realizar requisi\xe7\xf5es utilize o "),e.j41(43,"code"),e.EFF(44,"HttpClient"),e.k0s(),e.EFF(45,", conforme exemplo abaixo:"),e.k0s(),e.j41(46,"pre")(47,"code"),e.EFF(48,"import { HttpClient } from '@angular/common/http';\n\n...\n\n@Injectable()\nexport class UserService {\n\n  constructor(private http: HttpClient) { }\n\n  getUsers() {\n    return this.http.get('/api/users');\n  }\n\n  ...\n\n}\n"),e.k0s()(),e.j41(49,"h2"),e.EFF(50,"Como usar"),e.k0s(),e.j41(51,"p"),e.EFF(52,"Para exibir as notica\xe7\xf5es \xe9 necess\xe1rio informar a mensagem no retorno da requisi\xe7\xe3o. A estrutura da mensagem\n\xe9 feita com base no status da resposta, conforme ser\xe1 apresentado nos pr\xf3ximos t\xf3picos."),e.k0s(),e.j41(53,"h3"),e.EFF(54,"Estrutura das mensagens"),e.k0s(),e.j41(55,"h4"),e.EFF(56,"Mensagens de sucesso "),e.j41(57,"code"),e.EFF(58,"2xx"),e.k0s()(),e.j41(59,"p"),e.EFF(60,"Para exibir mensagens ao retornar uma lista ou um item, deve-se incluir a propriedade "),e.j41(61,"code"),e.EFF(62,"_messages"),e.k0s(),e.EFF(63," no objeto de retorno.\nPor exemplo:"),e.k0s(),e.j41(64,"pre")(65,"code"),e.EFF(66,'{\n  "_messages": [\n    {\n      "type": "success" || "warning" || "error" || "information" (ser\xe1 exibido a `tag` apenas se esta propriedade possuir valor),\n      "code": "t\xedtulo ou c\xf3digo da mensagem",\n      "message": "texto da mensagem",\n      "detailedMessage": "detalhamento da mensagem"\n    }\n  ]\n}\n'),e.k0s()(),e.j41(67,"h4"),e.EFF(68,"Mensagens de erro "),e.j41(69,"code"),e.EFF(70,"4xx"),e.k0s(),e.EFF(71," ou "),e.j41(72,"code"),e.EFF(73,"5xx"),e.k0s()(),e.j41(74,"p"),e.EFF(75,"Ao retornar erro, o objeto n\xe3o necessita ter "),e.j41(76,"code"),e.EFF(77,"_messages"),e.k0s(),e.EFF(78,", deve-se retornar o objeto diretamente:"),e.k0s(),e.j41(79,"pre")(80,"code"),e.EFF(81,'{\n   "code": "t\xedtulo ou c\xf3digo da mensagem",\n   "message": "texto da mensagem",\n   "detailedMessage": "detalhamento da mensagem"\n}\n'),e.k0s()(),e.j41(82,"p"),e.EFF(83,"Tamb\xe9m \xe9 poss\xedvel informar as seguintes propriedades:"),e.k0s(),e.j41(84,"ul")(85,"li")(86,"code"),e.EFF(87,"helpUrl"),e.k0s(),e.EFF(88,": link para a documenta\xe7\xe3o do erro;"),e.j41(89,"ul")(90,"li"),e.EFF(91,'Caso for informado, ser\xe1 exibido uma a\xe7\xe3o de "Ajuda" na notifica\xe7\xe3o, para isso n\xe3o dever\xe1 ter a propriedade '),e.j41(92,"code"),e.EFF(93,"detailedMessage"),e.k0s(),e.EFF(94,"."),e.k0s()()(),e.j41(95,"li")(96,"code"),e.EFF(97,"type"),e.k0s(),e.EFF(98,": \xc9 poss\xedvel informar "),e.j41(99,"code"),e.EFF(100,"error"),e.k0s(),e.EFF(101,", "),e.j41(102,"code"),e.EFF(103,"warning"),e.k0s(),e.EFF(104," e "),e.j41(105,"code"),e.EFF(106,"information"),e.k0s(),e.EFF(107,", sendo "),e.j41(108,"code"),e.EFF(109,"error"),e.k0s(),e.EFF(110," o valor padr\xe3o."),e.k0s(),e.j41(111,"li")(112,"code"),e.EFF(113,"details"),e.k0s(),e.EFF(114,": Uma lista de objetos de mensagem (recursiva) com mais detalhes sobre a mensagem principal."),e.k0s(),e.j41(115,"li")(116,"code"),e.EFF(117,"detailTitle"),e.k0s(),e.EFF(118,": caso for informado, ser\xe1 apresentado como t\xedtulo dos detalhes substituindo o padr\xe3o "),e.j41(119,"code"),e.EFF(120,"code - message"),e.k0s()()(),e.j41(121,"blockquote")(122,"p"),e.EFF(123,"Veja o "),e.j41(124,"a",6),e.EFF(125,"Guia de implementa\xe7\xe3o de APIs"),e.k0s(),e.EFF(126," para mais detalhes sobre a estrutura das mensagens."),e.k0s()(),e.j41(127,"h3"),e.EFF(128,"Cabe\xe7alho"),e.k0s(),e.j41(129,"p"),e.EFF(130,"\xc9 poss\xedvel dispensar a notifica\xe7\xe3o para o usu\xe1rio utilizando no cabe\xe7alho da requisi\xe7\xe3o os par\xe2metros listados abaixo com o valor\nigual a "),e.j41(131,"code"),e.EFF(132,"true"),e.k0s(),e.EFF(133,":"),e.k0s(),e.j41(134,"ul")(135,"li")(136,"p")(137,"code"),e.EFF(138,"X-PO-No-Message"),e.k0s(),e.EFF(139,": N\xe3o exibe notifica\xe7\xf5es de erro e/ou sucesso."),e.k0s()(),e.j41(140,"li")(141,"p")(142,"code"),e.EFF(143,"X-PO-No-Error"),e.k0s(),e.EFF(144,": N\xe3o mostra notifica\xe7\xf5es de erro com c\xf3digos "),e.j41(145,"code"),e.EFF(146,"4xx"),e.k0s(),e.EFF(147," e "),e.j41(148,"code"),e.EFF(149,"5xx"),e.k0s(),e.EFF(150,"."),e.k0s()()(),e.j41(151,"pre")(152,"code"),e.EFF(153,"...\n const headers = { 'X-PO-No-Message': 'true' };\n\n this.http.get(`/customers/1`, { headers: headers });\n...\n"),e.k0s()(),e.j41(154,"blockquote")(155,"p"),e.EFF(156,"Ap\xf3s a valida\xe7\xe3o no "),e.j41(157,"em"),e.EFF(158,"interceptor"),e.k0s(),e.EFF(159,", os par\xe2metros ser\xe3o removidos do cabe\xe7alho da requisi\xe7\xe3o. "),e.k0s()()()())},encapsulation:2})}class m{route;router;sub;hidePoWebSample=!0;samplesLength=1;activeTab="\x1cdoc";actions=[{label:"Documenta\xe7\xe3o",action:this.goBack.bind(this),icon:"po-icon-document-filled"},{label:"Colabore",action:this.improveDocs.bind(this)}];constructor(t,o){this.route=t,this.router=o}goBack(){this.router.navigate(["documentation"])}improveDocs(){this.router.navigate(["guides/development-flow"])}ngOnInit(){this.sub=this.route.queryParams.subscribe(t=>{const o=t.view;this.activeTab=o||"doc",this.hidePoWebSample=0===this.samplesLength})}ngOnDestroy(){this.sub.unsubscribe()}static \u0275fac=function(o){return new(o||m)(e.rXU(c.nX),e.rXU(c.Ix))};static \u0275cmp=e.VBU({type:m,selectors:[["ng-component"]],decls:6,vars:4,consts:[["p-title"," Http Interceptor",3,"p-actions"],["p-size","1"],["p-label","Documenta\xe7\xe3o",3,"p-active"],["p-label","Exemplos",3,"p-hide","p-active"]],template:function(o,s){1&o&&(e.j41(0,"po-page-default",0)(1,"po-tabs",1)(2,"po-tab",2),e.nrm(3,"sample-po-http-interceptor-doc"),e.k0s(),e.j41(4,"po-tab",3),e.nrm(5,"sample-po-http-interceptor-labs-view"),e.k0s()()()),2&o&&(e.Y8G("p-actions",s.actions),e.R7$(2),e.Y8G("p-active",s.activeTab.includes("doc")),e.R7$(2),e.Y8G("p-hide",s.hidePoWebSample)("p-active",s.activeTab.includes("web")))},dependencies:[r.$kB,r.OX9,r.pxt,u,l],encapsulation:2})}const M=[{path:"",component:m}];class h{static \u0275fac=function(o){return new(o||h)};static \u0275mod=e.$C({type:h});static \u0275inj=e.G2t({imports:[c.iI.forChild(M),c.iI]})}class F{static \u0275fac=function(o){return new(o||F)};static \u0275mod=e.$C({type:F});static \u0275inj=e.G2t({imports:[E.G,h]})}}}]);